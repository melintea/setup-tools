#!/bin/bash

#
# Add to ~/.bashrc: 
# source ${HOME}/work/github/setup-tools/linux/config/bash/bashrc
#

function linkto() {
    src=$1
    tgt=$2

    if [ ! -e ${tgt} ]; then
        echo "Fixing .${tgt}"
        ln -s ${src} ${tgt}
    fi
}


hooked=`cat ${HOME}/.bashrc | grep source | grep setup-tools/linux/config/bash/bashrc`
if [ -z "$hooked" ]; then
cat << EOL >> ${HOME}/.bashrc

#
#
#
source ${HOME}/work/github/setup-tools/linux/config/bash/bashrc

EOL
fi


export CUSTOMCFGROOT=${HOME}/work/github/setup-tools/linux/config
pushd ${CUSTOMCFGROOT} && git pull --rebase && popd

linkto ${CUSTOMCFGROOT}/gdb/gdbinit  ${HOME}/.gdbinit
linkto ${CUSTOMCFGROOT}/gitconfig    ${HOME}/.gitconfig
linkto ${CUSTOMCFGROOT}/vimrc        ${HOME}/.vimrc


CONFIGDIR=${CUSTOMCFGROOT}/bash
for cfgfile in ${CONFIGDIR}/_*; do
    #echo "Processing ${cfgfile}"
    . ${cfgfile}
done

# 
# 
# 

